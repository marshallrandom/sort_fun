<html>
<head>

    <link rel="stylesheet" href="/css/stylesheet.css">
    <link rel="stylesheet" href="/css/bootstrap.min.css">
    <script src="/js/jquery-3.5.1.min.js"></script>
    <script src="/js/bootstrap.min.js"></script>


</head>
<script>
    var ImagesRating = 0;
    var ItemNamesRating = 0;
    var ItemDescriptionRating = 0;
    var ListNameRating = 0;
    var ComparisonQuestionRating = 0;
    function showListInfo(elem) {
       document.getElementById( 'description_preview' ).textContent = elem.parentElement.getElementsByClassName( 'listdescription' )[0].textContent;
       document.getElementById( 'listname_preview' ).textContent =  elem.parentElement.getElementsByClassName( 'listname' )[0].textContent;
       if (elem.parentElement.getElementsByClassName( 'listimage' )[0].textContent != "") 
            document.getElementById( 'image_preview' ).innerHTML= '<img src="' + elem.parentElement.getElementsByClassName( 'listimage' )[0].textContent + '" width="300" height="300" alt="image here">' ; 
        else
        document.getElementById( 'image_preview' ).innerHTML= '' ; 

    }

    function getListInfo(elem) {
        document.getElementById( 'listselected' ).value = elem.parentElement.getElementsByClassName( 'listid' )[0].textContent;
    };

    function getSortListInfo(elem) {
        document.getElementById( 'sortlistselected' ).value = elem.parentElement.getElementsByClassName( 'listid' )[0].textContent;
        document.getElementById( 'sortname' ).defaultValue = elem.parentElement.getElementsByClassName( 'listsortname' )[0].textContent;
        document.getElementById( 'sortproperty' ).defaultValue = elem.parentElement.getElementsByClassName( 'listpropertycompare' )[0].textContent;
    }

    function ratingpicking(elem){

        var elementon = elem.id.substr(elem.id.length-1, 1);
        var i;
        for (i = 1; i <= 5; i++) {
            if ( i <= elementon)
                document.getElementById(elem.id.substr(0, elem.id.length-1) + i).src = "/images/rating/fullstar.png"; 
            else
                document.getElementById(elem.id.substr(0, elem.id.length-1) + i).src =  "/images/rating/emptystar.png";         
        }
        if (elementon == 0)
            document.getElementById(elem.id.substr(0, elem.id.length-1) + 'caption').innerHTML = "";
        else if (elementon == 1)
            document.getElementById(elem.id.substr(0, elem.id.length-1) + 'caption').innerHTML = " <b>Poor</b>";
        else if (elementon == 2)
            document.getElementById(elem.id.substr(0, elem.id.length-1) + 'caption').innerHTML = " <b>Fair</b>";
        else if (elementon == 3)
            document.getElementById(elem.id.substr(0, elem.id.length-1) + 'caption').innerHTML = " <b>Average</b>"; 
        else if (elementon == 4)
            document.getElementById(elem.id.substr(0, elem.id.length-1) + 'caption').innerHTML = " <b>Good</b>"; 
        else if (elementon == 5)
            document.getElementById(elem.id.substr(0, elem.id.length-1) + 'caption').innerHTML = " <b>Excellent</b>";      

    }

    function ratingnotpicking(elem) {
        var elementon = elem.id.substr(elem.id.length-1, 1);
        var i;
        var currentrating = 0;

        if ( elem.id.substr(0, elem.id.length-1) == "imageratingstar")
            currentrating = ImagesRating;
        else if ( elem.id.substr(0, elem.id.length-1) == "itemratingstar")
            currentrating = ItemNamesRating;
        else if ( elem.id.substr(0, elem.id.length-1) == "itemdescripitonratingstar")
            currentrating = ItemDescriptionRating;
        else if ( elem.id.substr(0, elem.id.length-1) == "listratingstar")
            currentrating = ListNameRating;
        else if ( elem.id.substr(0, elem.id.length-1) == "comparisonratingstar")
            currentrating = ComparisonQuestionRating;



        for (i = 1; i <= 5; i++) {
            if ( i <= currentrating)
                document.getElementById(elem.id.substr(0, elem.id.length-1) + i).src = "/images/rating/fullstar.png"; 
            else
                document.getElementById(elem.id.substr(0, elem.id.length-1) + i).src =  "/images/rating/emptystar.png";         
        } 
        if (currentrating == 0)
            document.getElementById(elem.id.substr(0, elem.id.length-1) + 'caption').innerHTML = "";
        else if (currentrating == 1)
            document.getElementById(elem.id.substr(0, elem.id.length-1) + 'caption').innerHTML = " <b>Poor</b>";
        else if (currentrating == 2)
            document.getElementById(elem.id.substr(0, elem.id.length-1) + 'caption').innerHTML = " <b>Fair</b>";
        else if (currentrating == 3)
            document.getElementById(elem.id.substr(0, elem.id.length-1) + 'caption').innerHTML = " <b>Average</b>"; 
        else if (currentrating == 4)
            document.getElementById(elem.id.substr(0, elem.id.length-1) + 'caption').innerHTML = " <b>Good</b>"; 
        else if (currentrating == 5)
            document.getElementById(elem.id.substr(0, elem.id.length-1) + 'caption').innerHTML = " <b>Excellent</b>";  

    }

    function ratingpicked(elem) {
        var elementon = elem.id.substr(elem.id.length-1, 1);
        var i;
        var currentrating = 0;

        if ( elem.id.substr(0, elem.id.length-1) == "imageratingstar")
            ImagesRating = elementon;
        else if ( elem.id.substr(0, elem.id.length-1) == "itemratingstar")
            ItemNamesRating = elementon;
        else if ( elem.id.substr(0, elem.id.length-1) == "itemdescripitonratingstar")
            ItemDescriptionRating = elementon;
        else if ( elem.id.substr(0, elem.id.length-1) == "listratingstar")
            ListNameRating = elementon;
        else if ( elem.id.substr(0, elem.id.length-1) == "comparisonratingstar")
            ComparisonQuestionRating = elementon;
        currentrating = elementon;


        for (i = 1; i <= 5; i++) {
            if ( i <= currentrating)
                document.getElementById(elem.id.substr(0, elem.id.length-1) + i).src = "/images/rating/fullstar.png"; 
            else
                document.getElementById(elem.id.substr(0, elem.id.length-1) + i).src =  "/images/rating/emptystar.png";         
        } 
        if (currentrating == 0)
            document.getElementById(elem.id.substr(0, elem.id.length-1) + 'caption').innerHTML = "";
        else if (currentrating == 1)
            document.getElementById(elem.id.substr(0, elem.id.length-1) + 'caption').innerHTML = " <b>Poor</b>";
        else if (currentrating == 2)
            document.getElementById(elem.id.substr(0, elem.id.length-1) + 'caption').innerHTML = " <b>Fair</b>";
        else if (currentrating == 3)
            document.getElementById(elem.id.substr(0, elem.id.length-1) + 'caption').innerHTML = " <b>Average</b>"; 
        else if (currentrating == 4)
            document.getElementById(elem.id.substr(0, elem.id.length-1) + 'caption').innerHTML = " <b>Good</b>"; 
        else if (currentrating == 5)
            document.getElementById(elem.id.substr(0, elem.id.length-1) + 'caption').innerHTML = " <b>Excellent</b>"; 

        document.getElementById(elem.id.substr(0, elem.id.length-1) + 'sent').value = currentrating;

    }



</script>

                    <% if(!currentUser){ %>
<form action="/login" method="POST">
    <input type="text" name="username" placeholder="username">
    <input type="password" name="password" placeholder="password">
    <input type="submit" value="Login!">
</form>
                        <li><a href="/register">Sign Up</a></li>
                    <% } else { %>
                        <li><a href="#">Signed In As <%= currentUser.username %></a></li>
                        <li><a href="/logout">Logout</a></li>
                    <% } %>
<span id="list_image" style="position:fixed; top: 20%; left: 30%;"><h3 id="listname_preview"></h3><h3 id="description_preview"></h3><h3 id="image_preview"></h3></span>                  
 <h3><%=savedlist[0].sortname%>
    <span class="listid d-none"><%=savedlist[0].id%></span>
    <span class="listsortname d-none"><%=savedlist[0].sortname%></span>
    <span class="listpropertycompare d-none"><%=savedlist[0].propertycompare%></span>
    <% if(!!currentUser){ %>
        <button type="button" class="btn bg-primary btn-sm mb-1 ml-1" data-toggle="modal" data-target="#myModalsort" onclick="getSortListInfo(this)">Sort</button>
        <button type="button" class="btn bg-warning btn-sm mb-1 ml-1" data-toggle="modal" data-target="#myModal" onclick="getListInfo(this)">Get List</button>
    <% } %>
</h3>
 <h4><%=savedlist[0].propertycompare%></h4>
 <h5>Created on <%=savedlist[0].saveddate%>
 <% var listcreator = ""; 
   if ( !(typeof listofothers === typeof undefined) ) {
     listofothers.forEach(function(listofothers_items){ 

          if (savedlist[0].id + "" == listofothers_items._id + "") { 
            listcreator = listofothers_items.users[0].username;                
             }             
       });
   }
 if (listcreator != "") { %>
by <%=listcreator%><% } %></h5>

<span class="container">

    <span class="row justify-content-start">
    <ul id="list" class="col-4">
    <% var countitems = 1; %>
    <% if ( !(typeof savedlistitems === typeof undefined) ) { savedlistitems.forEach(function(listitem){ %>
        <li><label>
            <%=countitems + ") "  %>
            <button type="button" class="btn btn-success btn-sm mb-1 ml-1" onclick="showListInfo(this)">View</button>
            <span class="listdescription d-none"><%=listitem.description%></span>
            <span class="listimage d-none"><%=listitem.image%></span>
            <span class="listname"><%=listitem.name%></span>
            <span class="listnameid d-none"><%=listitem.id%></span>                    
        </label>                 
        </li>
    </form> 
    <% countitems++; }) }; %>
    </ul>





</span>
<h3>Others who have sorted this list</h3><br><br> 
    <ul>
        <% var countproperties = 0; 
        if ( !(typeof listofothers === typeof undefined) ) {
         distinctproperties.forEach(function(distinctproperties_items){ 
             countproperties = 0; 

             listofothers.forEach(function(listofothers_items){ 
                 if(listofothers_items.propertycompare.toUpperCase() == distinctproperties_items) { 
                     countproperties++ 
                    if (countproperties == 1) { %> 
                        <li><%=listofothers_items.propertycompare%> <ul>
                    <% } %>
                    <% if (savedlist[0].id + "" == listofothers_items._id + "") { %>
                        <li><b><a href="/viewpubliclist/<%=listofothers_items._id%>"><%=listofothers_items.sortname%></a> - created by <a href="/users/<%=listofothers_items.users[0]._id%>"><%=listofothers_items.users[0].username%></a>, on <%=listofothers_items.saveddate%></b></li>                   
                    <% } else { %>
                       <li><a href="/viewpubliclist/<%=listofothers_items._id%>"><%=listofothers_items.sortname%></a> - created by <a href="/users/<%=listofothers_items.users[0]._id%>"><%=listofothers_items.users[0].username%></a>, on <%=listofothers_items.saveddate%></li>                   
    
                    <% } %>            
              <% }}); %>
        </ul>
        <% });  } %>
    </ul>
</span>


<!-- Modal -->
<div id="myModalsort" class="modal fade" role="dialog">
    <div class="modal-dialog">
  
      <!-- Modal content-->
      <div class="modal-content">
        <div class="modal-header">
          <h4 class="modal-title">Sort List Setup</h4>
          <button type="button" class="close" data-dismiss="modal">&times;</button>
        </div>
        <div class="modal-body">
            <span class="row">
        
                <div style="width: 100%; margin: 25px auto;">
                    <form action="/sortpubliclist" method="POST">
                        
                        <div class="form-group">
                            <input class="form-control" type="hidden" id="sortlistselected" name="sortlistselected" value="">
                            <label for="sortname">Name of sort (example: Favorite Food)</label>
                            <input class="form-control" type="text" id="sortname" name="sortname" placeholder="name">
                        </div>

                        <div class="form-group">
                            <label for="sortname">Property question (example: Which food is your favorite?)</label>
                            <input class="form-control" type="text" id="sortproperty" name="sortproperty" placeholder="property">
                        </div>
                        <div class="form-group">
                            <button class="btn btn-lg btn-primary btn-block">Submit!</button>
                        </div>


                    </form>
                </div>
            </span>
        </div>
        <div class="modal-footer form-group">
          <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
        </div>
      </div>
  
    </div>
  </div>

<!-- Modal -->
<div id="myModal" class="modal fade" role="dialog">
    <div class="modal-dialog">
  
      <!-- Modal content-->
      <div class="modal-content">
        <div class="modal-header">
          <h4 class="modal-title">Copy List To Your Account</h4>
          <button type="button" class="close" data-dismiss="modal">&times;</button>
        </div>
        <div class="modal-body">
            <span class="row">
        
                <div style="width: 100%; margin: 25px auto;">
                    <form action="/getpubliclist" method="POST">
                        
                        <div class="form-group">
                            <input class="form-control" type="hidden" id="listselected" name="listselected" value="">
                            <label for="listname">Name of list</label>
                            <input class="form-control" type="text" id="listname" name="listname" placeholder="name">
                        </div>

                        <div class="form-group">
                            <button class="btn btn-lg btn-primary btn-block">Submit!</button>
                        </div>


                    </form>
                </div>
            </span>
        </div>
        <div class="modal-footer form-group">
          <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
        </div>
      </div>
  
    </div>
  </div><%
  var countforaverages = 0,
  imagerating_avg = 0,
  itemrating_avg = 0,
  itemdescripitonrating_avg = 0,
  listrating_avg = 0, 
  comparisonrating_avg = 0;
  if ( !(typeof generalratings === typeof undefined) ) {
    generalratings.forEach(function(rating_items){
        countforaverages++;
        imagerating_avg+=rating_items.imagerating;
        itemrating_avg+=rating_items.itemrating;
        itemdescripitonrating_avg+=rating_items.itemdescripitonrating;
    });
  };
  if (countforaverages > 0)
  {
    imagerating_avg=imagerating_avg/countforaverages;
    itemrating_avg=itemrating_avg/countforaverages;
    itemdescripitonrating_avg=itemdescripitonrating_avg/countforaverages; 
  }
  else {
    imagerating_avg=0;
    itemrating_avg=0;
    itemdescripitonrating_avg=0;      
  }
  countforaverages=0;
  if ( !(typeof userratings === typeof undefined) ) {
    userratings.forEach(function(rating_items){
        countforaverages++;
        listrating_avg+=rating_items.listrating;
        comparisonrating_avg+=rating_items.comparisonrating;
    });
  };
  if (countforaverages > 0)
  {
    listrating_avg = listrating_avg/countforaverages;
    comparisonrating_avg = comparisonrating_avg/countforaverages;
  } else {
    listrating_avg = 0;
    comparisonrating_avg = 0;

  }


  %>
<h4>Ratings</h4>
<h5>Images:<%for(i = 1; i <= 5; i++){
        if(i-0.5 <= imagerating_avg) {%>
            <img class="starrating" src="/images/rating/fullstar.png">
        <% } else if (i-0.75 <= imagerating_avg) { %>
            <img class="starrating" src="/images/rating/halfstar.png">
        <% } else { %>
            <img class="starrating" src="/images/rating/emptystar.png">  
        <% } 
     }; %><%=Math.round( imagerating_avg * 100 + Number.EPSILON ) / 100%>
</h5>
<h5>List Item Names:<%for(i = 1; i <= 5; i++){
        if(i-0.5 <= itemrating_avg) {%>
            <img class="starrating" src="/images/rating/fullstar.png">
        <% } else if (i-0.75 <= itemrating_avg) { %>
            <img class="starrating" src="/images/rating/halfstar.png">
        <% } else { %>
            <img class="starrating" src="/images/rating/emptystar.png">  
        <% } 
     }; %><%=Math.round( itemrating_avg * 100 + Number.EPSILON ) / 100%>
</h5>
<h5>List Item Descriptions:<%for(i = 1; i <= 5; i++){
        if(i-0.5 <= itemdescripitonrating_avg) {%>
            <img class="starrating" src="/images/rating/fullstar.png">
        <% } else if (i-0.75 <= itemdescripitonrating_avg) { %>
            <img class="starrating" src="/images/rating/halfstar.png">
        <% } else { %>
            <img class="starrating" src="/images/rating/emptystar.png">  
        <% } 
     }; %><%=Math.round( itemdescripitonrating_avg * 100 + Number.EPSILON ) / 100%>
</h5>
<h5>List Name:<%for(i = 1; i <= 5; i++){
        if(i-0.5 <= listrating_avg) {%>
            <img class="starrating" src="/images/rating/fullstar.png">
        <% } else if (i-0.75 <= listrating_avg) { %>
            <img class="starrating" src="/images/rating/halfstar.png">
        <% } else { %>
            <img class="starrating" src="/images/rating/emptystar.png">  
        <% } 
     };%><%=Math.round( listrating_avg * 100 + Number.EPSILON ) / 100%>
</h5>
<h5>Comparison Property:<%for(i = 1; i <= 5; i++){
        if(i-0.5 <= comparisonrating_avg) {%>
            <img class="starrating" src="/images/rating/fullstar.png">
        <% } else if (i-0.75 <= comparisonrating_avg) { %>
            <img class="starrating" src="/images/rating/halfstar.png">
        <% } else { %>
            <img class="starrating" src="/images/rating/emptystar.png">  
        <% } 
     }; %><%=Math.round( comparisonrating_avg * 100 + Number.EPSILON ) / 100%>
</h5>
<br>



  <div class="GeneralListRatings">
  <h4>General List Ratings</h4>
  <br>

   
  <%  
  if(showgeneralrating == true){

    
    %>
  <div style="width: 25%;">
    
    <form action="/sendgeneralrating" method="POST">
        
        <div class="form-group">

            <h5>Images</h5>
            <img id="imageratingstar1" class="starrating" src="/images/rating/emptystar.png" alt="image here" onmouseenter="ratingpicking(this)" onmouseleave="ratingnotpicking(this)" onclick="ratingpicked(this)">
            <img id="imageratingstar2" class="starrating" src="/images/rating/emptystar.png" alt="image here" onmouseenter="ratingpicking(this)" onmouseleave="ratingnotpicking(this)" onclick="ratingpicked(this)">
            <img id="imageratingstar3" class="starrating" src="/images/rating/emptystar.png" alt="image here" onmouseenter="ratingpicking(this)" onmouseleave="ratingnotpicking(this)" onclick="ratingpicked(this)">
            <img id="imageratingstar4" class="starrating" src="/images/rating/emptystar.png" alt="image here" onmouseenter="ratingpicking(this)" onmouseleave="ratingnotpicking(this)" onclick="ratingpicked(this)">
            <img id="imageratingstar5" class="starrating" src="/images/rating/emptystar.png" alt="image here" onmouseenter="ratingpicking(this)" onmouseleave="ratingnotpicking(this)" onclick="ratingpicked(this)">
            <span id="imageratingstarcaption"></span>
            <h5>Item Names</h5>
            <img id="itemratingstar1" class="starrating" src="/images/rating/emptystar.png" alt="image here" onmouseenter="ratingpicking(this)" onmouseleave="ratingnotpicking(this)" onclick="ratingpicked(this)">
            <img id="itemratingstar2" class="starrating" src="/images/rating/emptystar.png" alt="image here" onmouseenter="ratingpicking(this)" onmouseleave="ratingnotpicking(this)" onclick="ratingpicked(this)">
            <img id="itemratingstar3" class="starrating" src="/images/rating/emptystar.png" alt="image here" onmouseenter="ratingpicking(this)" onmouseleave="ratingnotpicking(this)" onclick="ratingpicked(this)">
            <img id="itemratingstar4" class="starrating" src="/images/rating/emptystar.png" alt="image here" onmouseenter="ratingpicking(this)" onmouseleave="ratingnotpicking(this)" onclick="ratingpicked(this)">
            <img id="itemratingstar5" class="starrating" src="/images/rating/emptystar.png" alt="image here" onmouseenter="ratingpicking(this)" onmouseleave="ratingnotpicking(this)" onclick="ratingpicked(this)">
            <span id="itemratingstarcaption"></span>
            <h5>Item Descriptions</h5>
            <img id="itemdescripitonratingstar1" class="starrating" src="/images/rating/emptystar.png" alt="image here" onmouseenter="ratingpicking(this)" onmouseleave="ratingnotpicking(this)" onclick="ratingpicked(this)">
            <img id="itemdescripitonratingstar2" class="starrating" src="/images/rating/emptystar.png" alt="image here" onmouseenter="ratingpicking(this)" onmouseleave="ratingnotpicking(this)" onclick="ratingpicked(this)">
            <img id="itemdescripitonratingstar3" class="starrating" src="/images/rating/emptystar.png" alt="image here" onmouseenter="ratingpicking(this)" onmouseleave="ratingnotpicking(this)" onclick="ratingpicked(this)">
            <img id="itemdescripitonratingstar4" class="starrating" src="/images/rating/emptystar.png" alt="image here" onmouseenter="ratingpicking(this)" onmouseleave="ratingnotpicking(this)" onclick="ratingpicked(this)">
            <img id="itemdescripitonratingstar5" class="starrating" src="/images/rating/emptystar.png" alt="image here" onmouseenter="ratingpicking(this)" onmouseleave="ratingnotpicking(this)" onclick="ratingpicked(this)">
            <span id="itemdescripitonratingstarcaption"></span>
            <input class="form-control" type="hidden" id="imageratingstarsent" name="imageratingstarsent" value="">
            <input class="form-control" type="hidden" id="itemratingstarsent" name="itemratingstarsent" value="">
            <input class="form-control" type="hidden" id="itemdescripitonratingstarsent" name="itemdescripitonratingstarsent" value="">
            <input class="form-control" type="hidden" id="generallistid" name="generallistid" value="<%=savedlist[0].listitems_md5%>">           
            <br><br>
            <input class="form-control" type="text" id="generalratingcomment" name="generalratingcomment" placeholder="General List Comment Here">
            <br><br>
                <button class="btn btn-lg btn-primary btn-block">Submit!</button>
            </div>
    </form>
</div>
<%}%>
<% 
if ( !(typeof generalratings === typeof undefined) ) {
generalratings.forEach(function(rating_items){%>
<div class="singlerating">
<h5>Username:  <%=rating_items.users[0].username%></h5>
<h5>Images:<%for(i = 1; i <= 5; i++){
        if(i <= rating_items.imagerating) {%>
            <img class="starrating" src="/images/rating/fullstar.png">
        <% } else { %>
            <img class="starrating" src="/images/rating/emptystar.png">  
        <% } 
     } %>
</h5>
<h5>List Item Names:<%for(i = 1; i <= 5; i++){
        if(i <= rating_items.itemrating) {%>
            <img class="starrating" src="/images/rating/fullstar.png">
        <% } else { %>
            <img class="starrating" src="/images/rating/emptystar.png">  
        <% } 
     } %>
</h5>
<h5>List Item Descriptions:<%for(i = 1; i <= 5; i++){
        if(i <= rating_items.itemdescripitonrating) {%>
            <img class="starrating" src="/images/rating/fullstar.png">
        <% } else { %>
            <img class="starrating" src="/images/rating/emptystar.png">  
        <% } 
     } %>
</h5>
<h5>Comment: <%=rating_items.ratingcomment%></h5>
<br>
</div>

<% }); } %>
</div>


<br><br>
<div class="UserListRatings">
<h4>User List Ratings</h4>
<br>
<%if(showuserrating == true){%>
  <div style="width: 25%;">    
    <form action="/senduserrating" method="POST">       
        <div class="form-group">            

            <h5>List Name</h5>
            <img id="listratingstar1" class="starrating" src="/images/rating/emptystar.png" alt="image here" onmouseenter="ratingpicking(this)" onmouseleave="ratingnotpicking(this)" onclick="ratingpicked(this)">
            <img id="listratingstar2" class="starrating" src="/images/rating/emptystar.png" alt="image here" onmouseenter="ratingpicking(this)" onmouseleave="ratingnotpicking(this)" onclick="ratingpicked(this)">
            <img id="listratingstar3" class="starrating" src="/images/rating/emptystar.png" alt="image here" onmouseenter="ratingpicking(this)" onmouseleave="ratingnotpicking(this)" onclick="ratingpicked(this)">
            <img id="listratingstar4" class="starrating" src="/images/rating/emptystar.png" alt="image here" onmouseenter="ratingpicking(this)" onmouseleave="ratingnotpicking(this)" onclick="ratingpicked(this)">
            <img id="listratingstar5" class="starrating" src="/images/rating/emptystar.png" alt="image here" onmouseenter="ratingpicking(this)" onmouseleave="ratingnotpicking(this)" onclick="ratingpicked(this)">
            <span id="listratingstarcaption"></span>
            <h5>Comparison Question</h5>
            <img id="comparisonratingstar1" class="starrating" src="/images/rating/emptystar.png" alt="image here" onmouseenter="ratingpicking(this)" onmouseleave="ratingnotpicking(this)" onclick="ratingpicked(this)">
            <img id="comparisonratingstar2" class="starrating" src="/images/rating/emptystar.png" alt="image here" onmouseenter="ratingpicking(this)" onmouseleave="ratingnotpicking(this)" onclick="ratingpicked(this)">
            <img id="comparisonratingstar3" class="starrating" src="/images/rating/emptystar.png" alt="image here" onmouseenter="ratingpicking(this)" onmouseleave="ratingnotpicking(this)" onclick="ratingpicked(this)">
            <img id="comparisonratingstar4" class="starrating" src="/images/rating/emptystar.png" alt="image here" onmouseenter="ratingpicking(this)" onmouseleave="ratingnotpicking(this)" onclick="ratingpicked(this)">
            <img id="comparisonratingstar5" class="starrating" src="/images/rating/emptystar.png" alt="image here" onmouseenter="ratingpicking(this)" onmouseleave="ratingnotpicking(this)" onclick="ratingpicked(this)">
            <span id="comparisonratingstarcaption"></span>
            <br><br>
            <input class="form-control" type="text" id="userratingcomment" name="userratingcomment" placeholder="User List Comment Here">
            <input class="form-control" type="hidden" id="listratingstarsent" name="listratingstarsent" value="">
            <input class="form-control" type="hidden" id="comparisonratingstarsent" name="comparisonratingstarsent" value="">
            <input class="form-control" type="hidden" id="userlistid" name="userlistid" value="<%=savedlist[0]._id%>">
            <br><br>
            <button class="btn btn-lg btn-primary btn-block">Submit!</button>
        </div>


        </form>
    </div>
    <%}%>

    <% 
    if ( !(typeof generalratings === typeof undefined) ) { 
    userratings.forEach(function(rating_items){%>
    <div class="singlerating">
    <h5>Username:  <%=rating_items.users[0].username%></h5>
    <h5>List Name:<%for(i = 1; i <= 5; i++){
            if(i <= rating_items.listrating) {%>
                <img class="starrating" src="/images/rating/fullstar.png">
            <% } else { %>
                <img class="starrating" src="/images/rating/emptystar.png">  
            <% } 
         } %>
    </h5>
    <h5>Comparison Property:<%for(i = 1; i <= 5; i++){
            if(i <= rating_items.comparisonrating) {%>
                <img class="starrating" src="/images/rating/fullstar.png">
            <% } else { %>
                <img class="starrating" src="/images/rating/emptystar.png">  
            <% } 
         } %>
    </h5>
    <h5>Comment: <%=rating_items.ratingcomment%></h5>
    <br>
    </div>

    <% }); } %>
</div>
    <a href="/">Back To Main</a>

</html>